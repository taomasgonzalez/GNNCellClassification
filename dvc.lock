schema: '2.0'
stages:
  getdata:
    cmd: python3 src/main.py getdata --dataset_dir dataset
    deps:
    - path: dataset/getdata.sh
      hash: md5
      md5: 6d59697dafb25c02eda3b4acc9646d55
      size: 727
      isexec: true
    outs:
    - path: dataset/data
      hash: md5
      md5: 55a9c5b06cfec81a760fe9ff5fbef4c6.dir
      size: 2680161928
      nfiles: 13
    - path: dataset/images
      hash: md5
      md5: 19cf81bfe0408f1df338cea98f2b13f3.dir
      size: 6400957080
      nfiles: 12
  preprocess:
    cmd: python3 src/main.py preprocess --dataset_dir dataset --graph_dir 
      out/graphs
    deps:
    - path: src/gene_filtering.py
      hash: md5
      md5: 3d6c39bd7abd49e96154631f09bb4382
      size: 1337
    - path: src/graph.py
      hash: md5
      md5: 77a13619ad9791e8b7c1ad2dc5eafa2a
      size: 5274
    - path: src/load_data.py
      hash: md5
      md5: deeaedf2f9f50161c13b796683e29697
      size: 977
    - path: src/preprocess.py
      hash: md5
      md5: ee5d7169ed41bbf763ffb4eb8175f708
      size: 4393
    outs:
    - path: out/graphs
      hash: md5
      md5: c37e1615aa3dd1fafb9796d4a11cc192.dir
      size: 1534893718
      nfiles: 24
  featurize:
    cmd: python3 src/main.py featurize --dataset_dir dataset --graph_dir 
      out/graphs --tensors_dir dataset/tensors
    deps:
    - path: params.yaml
      hash: md5
      md5: 9f217c9ac2ec13af6af5eec2d4c20c94
      size: 364
    - path: src/dataloader.py
      hash: md5
      md5: 16a081a7c958d7554f1b0a74f2d4e671
      size: 6709
    - path: src/graph.py
      hash: md5
      md5: 77a13619ad9791e8b7c1ad2dc5eafa2a
      size: 5274
    - path: src/load_data.py
      hash: md5
      md5: deeaedf2f9f50161c13b796683e29697
      size: 977
    - path: src/main.py
      hash: md5
      md5: 904c109ad13a282f13705fc64fa5611e
      size: 9421
    - path: src/preprocess.py
      hash: md5
      md5: ee5d7169ed41bbf763ffb4eb8175f708
      size: 4393
    outs:
    - path: dataset/tensors
      hash: md5
      md5: 03a7a3d2d54452ce7728e4096df90547.dir
      size: 16834914
      nfiles: 6
  train:
    cmd: python3 src/main.py train --tensors_dir dataset/tensors --params_file 
      params.yaml
    deps:
    - path: dataset/tensors
      hash: md5
      md5: 03a7a3d2d54452ce7728e4096df90547.dir
      size: 16834914
      nfiles: 6
    - path: params.yaml
      hash: md5
      md5: 9f217c9ac2ec13af6af5eec2d4c20c94
      size: 364
    - path: src/dataloader.py
      hash: md5
      md5: 16a081a7c958d7554f1b0a74f2d4e671
      size: 6709
    - path: src/main.py
      hash: md5
      md5: 79f9a47d9216555ea809397c933c0666
      size: 9346
    - path: src/mlflow_server.py
      hash: md5
      md5: dff011f480374bf823c68d292ec49247
      size: 856
    - path: src/model.py
      hash: md5
      md5: d9f166c50ccfa6ccf9998ba71c6c9bb4
      size: 2050
    - path: src/train.py
      hash: md5
      md5: a0602fb8be823cecdc427c94950cbb67
      size: 6203
    params:
      params.yaml:
        train.batch_size: 32
        train.hidden1: 208
        train.hidden2: 102
        train.hidden3: 40
        train.label_smoothing: 0.002
        train.learning_rate: 0.001
        train.num_epochs: 400
    outs:
    - path: metrics.json
      hash: md5
      md5: 994d3530a711dc2596a18cd0b673c689
      size: 36
    - path: models
      hash: md5
      md5: fe1625bc7cc888c99afc5f9027f0972d.dir
      size: 154097
      nfiles: 1
  test:
    cmd: python3 src/main.py test --tensors_dir dataset/tensors --params_file 
      params.yaml
    deps:
    - path: dataset/tensors
      hash: md5
      md5: 03a7a3d2d54452ce7728e4096df90547.dir
      size: 16834914
      nfiles: 6
    - path: params.yaml
      hash: md5
      md5: 9f217c9ac2ec13af6af5eec2d4c20c94
      size: 364
    - path: src/dataloader.py
      hash: md5
      md5: 16a081a7c958d7554f1b0a74f2d4e671
      size: 6709
    - path: src/main.py
      hash: md5
      md5: 904c109ad13a282f13705fc64fa5611e
      size: 9421
    - path: src/mlflow_server.py
      hash: md5
      md5: dff011f480374bf823c68d292ec49247
      size: 856
    - path: src/model.py
      hash: md5
      md5: d9f166c50ccfa6ccf9998ba71c6c9bb4
      size: 2050
    - path: src/train.py
      hash: md5
      md5: a0602fb8be823cecdc427c94950cbb67
      size: 6203
