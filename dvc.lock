schema: '2.0'
stages:
  getdata:
    cmd: python3 src/main.py getdata --dataset_dir dataset
    deps:
    - path: dataset/getdata.sh
      hash: md5
      md5: 6d59697dafb25c02eda3b4acc9646d55
      size: 727
      isexec: true
    outs:
    - path: dataset/data
      hash: md5
      md5: ad940ab30fba07a7c956b2840a9e6f9d.dir
      size: 2680161928
      nfiles: 13
    - path: dataset/images
      hash: md5
      md5: 19cf81bfe0408f1df338cea98f2b13f3.dir
      size: 6400957080
      nfiles: 12
  preprocess:
    cmd: python3 src/main.py preprocess --dataset_dir dataset --graph_dir 
      out/graphs
    deps:
    - path: src/gene_filtering.py
      hash: md5
      md5: 3d6c39bd7abd49e96154631f09bb4382
      size: 1337
    - path: src/graph.py
      hash: md5
      md5: 77a13619ad9791e8b7c1ad2dc5eafa2a
      size: 5274
    - path: src/load_data.py
      hash: md5
      md5: deeaedf2f9f50161c13b796683e29697
      size: 977
    - path: src/preprocess.py
      hash: md5
      md5: c174f11fe2c359f47951fe4bf1a3b3b4
      size: 4363
    outs:
    - path: out/graphs
      hash: md5
      md5: c37e1615aa3dd1fafb9796d4a11cc192.dir
      size: 1534893718
      nfiles: 24
  featurize:
    cmd: python3 src/main.py featurize --dataset_dir dataset --graph_dir 
      out/graphs --tensors_dir dataset/tensors
    deps:
    - path: src/dataloader.py
      hash: md5
      md5: c59708b437c6448c481bea60f53e686d
      size: 6685
    - path: src/graph.py
      hash: md5
      md5: 77a13619ad9791e8b7c1ad2dc5eafa2a
      size: 5274
    - path: src/load_data.py
      hash: md5
      md5: deeaedf2f9f50161c13b796683e29697
      size: 977
    - path: src/main.py
      hash: md5
      md5: a939148799e1727be8973ba11299ed81
      size: 8885
    - path: src/preprocess.py
      hash: md5
      md5: c174f11fe2c359f47951fe4bf1a3b3b4
      size: 4363
    outs:
    - path: dataset/tensors
      hash: md5
      md5: 75be6e5345a33e27e5de258dee95f7ba.dir
      size: 15881378
      nfiles: 6
  train:
    cmd: python3 src/main.py train --tensors_dir dataset/tensors --params_file 
      params.yaml
    deps:
    - path: dataset/tensors
      hash: md5
      md5: 75be6e5345a33e27e5de258dee95f7ba.dir
      size: 15881378
      nfiles: 6
    - path: params.yaml
      hash: md5
      md5: 3047dc1cc81484f8295f630b5a617eca
      size: 308
    - path: src/dataloader.py
      hash: md5
      md5: c59708b437c6448c481bea60f53e686d
      size: 6685
    - path: src/main.py
      hash: md5
      md5: a939148799e1727be8973ba11299ed81
      size: 8885
    - path: src/mlflow_server.py
      hash: md5
      md5: dff011f480374bf823c68d292ec49247
      size: 856
    - path: src/model.py
      hash: md5
      md5: a653eb8aac54ff07ef127abb34c5e30d
      size: 2010
    - path: src/train.py
      hash: md5
      md5: 5d499e4d680b4ba3f211bddf04e6f089
      size: 5372
    params:
      params.yaml:
        train.batch_size: 32
        train.hidden1: 208
        train.hidden2: 102
        train.hidden3: 40
        train.label_smoothing: 0.002
        train.learning_rate: 0.001
        train.num_epochs: 400
    outs:
    - path: metrics.json
      hash: md5
      md5: acdb2097e27c843d19017ccac71494ae
      size: 35
    - path: models
      hash: md5
      md5: 85f7b60bab598dc957627697b33767ba.dir
      size: 149937
      nfiles: 1
  test:
    cmd: python3 src/main.py test --tensors_dir dataset/tensors --params_file 
      params.yaml
    deps:
    - path: dataset/tensors
      hash: md5
      md5: 75be6e5345a33e27e5de258dee95f7ba.dir
      size: 15881378
      nfiles: 6
    - path: params.yaml
      hash: md5
      md5: 3047dc1cc81484f8295f630b5a617eca
      size: 308
    - path: src/dataloader.py
      hash: md5
      md5: c59708b437c6448c481bea60f53e686d
      size: 6685
    - path: src/main.py
      hash: md5
      md5: a939148799e1727be8973ba11299ed81
      size: 8885
    - path: src/mlflow_server.py
      hash: md5
      md5: dff011f480374bf823c68d292ec49247
      size: 856
    - path: src/model.py
      hash: md5
      md5: a653eb8aac54ff07ef127abb34c5e30d
      size: 2010
    - path: src/train.py
      hash: md5
      md5: 5d499e4d680b4ba3f211bddf04e6f089
      size: 5372
